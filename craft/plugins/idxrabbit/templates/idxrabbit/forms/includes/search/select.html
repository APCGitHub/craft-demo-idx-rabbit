{% spaceless %}

{% if field is defined and field %}
	{% if field starts with 'filter[' %}
		{# coming form parent #}

		{% set nameKey = field %}
	{% else %}
		{# called directly #}

		{% set key = random() %}
		{% set nameKey = "filter[" ~ field ~ "][" ~ key ~ "]" %}

		{% if clause is defined and clause == 'or' %}
			<input type="hidden" name="{{ nameKey }}[clause]" value="or">
		{% endif %}

		{% if type is defined and type %}
			{% if type != 'between' %}
				<input type="hidden" name="{{ nameKey }}[type]" value="{{ type }}">
			{% endif %}
		{% else %}
			<input type="hidden" name="{{ nameKey }}[type]" value="eq">
		{% endif %}

		{% if modifier is defined and modifier %}
			<input type="hidden" name="{{ nameKey }}[modifier]" value="{{ modifier }}">
		{% endif %}

		{% set nameKey = nameKey ~ "[value]" %}
	{% endif %}

	{% set options = (options is defined ? options : []) %}
	{% set value = (value is defined ? value : null) %}

	<select
		{% if class is defined and class %} class="{{ class }}"{% endif%}
		{% if id is defined and id %} id="{{ id }}"{% endif %}
		name="{{ nameKey }}"
		{% if disabled is defined and disabled %} disabled{% endif %}>
		{% for key, option in options %}
			{% set optionLabel = (option.label is defined ? option.label : option) %}
			{% set optionValue = (option.value is defined ? option.value : key) %}
			<option value="{{ optionValue }}"{% if optionValue == value %} selected{% endif %}{% if optionDisabled %} disabled{% endif %}>{{ optionLabel }}</option>
		{% endfor %}
	</select>
{% else %}
	<p>The {field} parameter is required.</p>
{% endif %}

{% endspaceless %}