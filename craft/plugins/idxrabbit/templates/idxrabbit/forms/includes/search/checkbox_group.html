{% spaceless %}

{% set key = random() %}

{% if field is defined %}
	{% set nameKey = "filter[" ~ field ~ "][" ~ key ~ "]" %}

	<input type="hidden" name="{{ nameKey }}[type]" value="{{ type }}">

	{% if clause is defined and clause == 'or' and field is defined %}
		<input type="hidden" name="{{ nameKey }}[clause]" value="or">
	{% endif %}

	{% if modifier is defined and modifier %}
		<input type="hidden" name="{{ nameKey }}[modifier]" value="{{modifier}}">
	{% endif %}

	{% set options = (options is defined ? options : []) %}
	{% set values = (values is defined ? values : []) %}
	{% set name = (nameKey is defined and nameKey ? nameKey ~ '[values][]' : null) %}

	{% for key, option in options %}
		{% set optionLabel = (option.label is defined ? option.label : option) %}
		{% set optionValue = (option.value is defined ? option.value : key) %}
		{% if wrapper is defined %}
			{% if wrapper['tag'] is defined and wrapper.tag %}
				<{{- wrapper.tag | trim | lower }}
					{% if wrapper['class'] and wrapper.class %} class="{{- wrapper.class -}}" {% endif -%}>
			{% endif %}
		{% endif %}
			{% include "forms/includes/search/checkbox.html" with {
				id:        (loop.first and id is defined ? id : null),
				field:      name,
				value:     optionValue,
				checked:   (optionValue in values)
			} only %}
			{{optionLabel}}
		{% if wrapper is defined %}
			{% if wrapper['tag'] is defined and wrapper.tag %}
				</{{- wrapper.tag | trim | lower -}}>
			{% endif %}
		{% endif %}
	{% endfor %}
{% else %}
	<p>Missing required {field} tag.</p>
{% endif %}

{% endspaceless %}