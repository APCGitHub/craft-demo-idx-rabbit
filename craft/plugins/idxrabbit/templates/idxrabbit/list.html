{% set results = listings({
	'$filter': (where is defined) ? where : '', 
	'$top': (limit is defined) ? limit : 100,
	'$skip': (page is defined) ? (page-1)*limit : 0,
	'$orderby': (orderBy is defined) ? orderBy : ''
}) %}

<div class="row listings-grid">
{% if results['errors'] is defined and results.errors %}
	{% for error in results.errors %}
		{% if error['message'] is defined %}
			<div class="alert alert-danger">{{error.message}}</div>
		{% else %}
			<div class="alert alert-danger">An error occurred</div>
		{% endif %}
	{% endfor %}
{% else %}
	{% set listings = results.data %}
	
	{% for listing in listings %}
		<div class="col-sm-6 col-md-3">
			{% include "listings/listing_grid.html" with {'listing': listing} only %}
		</div>
	{% endfor %}
{% endif %}
</div>
